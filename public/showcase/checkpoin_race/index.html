<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.107.0">
    <meta name="description" content="">


    <link rel="icon" href="/CFWebsite/images/crossIcon1.png" type="image/png">

    <title>Checkpoint Race :: CrossForge</title>

    
    <link href="/CFWebsite/css/nucleus.css?1702068498" rel="stylesheet">
    <link href="/CFWebsite/css/fontawesome-all.min.css?1702068498" rel="stylesheet">
    <link href="/CFWebsite/css/hybrid.css?1702068498" rel="stylesheet">
    <link href="/CFWebsite/css/featherlight.min.css?1702068498" rel="stylesheet">
    <link href="/CFWebsite/css/perfect-scrollbar.min.css?1702068498" rel="stylesheet">
    <link href="/CFWebsite/css/auto-complete.css?1702068498" rel="stylesheet">
    <link href="/CFWebsite/css/atom-one-dark-reasonable.css?1702068498" rel="stylesheet">
    <link href="/CFWebsite/css/theme.css?1702068498" rel="stylesheet">
    <link href="/CFWebsite/css/tabs.css?1702068498" rel="stylesheet">
    <link href="/CFWebsite/css/hugo-theme.css?1702068498" rel="stylesheet">
    
    <link href="/CFWebsite/css/theme-blue.css?1702068498" rel="stylesheet">
    
    

    <script src="/CFWebsite/js/jquery-3.3.1.min.js?1702068498"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/CFWebsite/showcase/checkpoin_race/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <h3><a href="http://localhost:1313/"> <img src="/CrossForgeLogo2.png" alt=""/></a></h3>
    </div>
    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='/'><i class='fas fa-home'></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/CFWebsite/basic_concepts/" title="Basic Concepts" class="dd-item
        
        
        
        ">
      <a href="/CFWebsite/basic_concepts/">
          Basic Concepts
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/basic_concepts/getting_started/" title="Installation" class="dd-item ">
        <a href="/CFWebsite/basic_concepts/getting_started/">
        Installation
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/basic_concepts/basic_structure/" title="Basic Program Structure" class="dd-item ">
        <a href="/CFWebsite/basic_concepts/basic_structure/">
        Basic Program Structure
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/basic_concepts/graphics_pipeline/" title="Graphics Pipeline Structure" class="dd-item ">
        <a href="/CFWebsite/basic_concepts/graphics_pipeline/">
        Graphics Pipeline Structure
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/basic_concepts/using_assets/" title="Loading and Storing Assets" class="dd-item ">
        <a href="/CFWebsite/basic_concepts/using_assets/">
        Loading and Storing Assets
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/basic_concepts/putting_it_all_together/" title="Putting it all together" class="dd-item ">
        <a href="/CFWebsite/basic_concepts/putting_it_all_together/">
        Putting it all together
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/CFWebsite/advanced_concepts/" title="Advanced Concepts" class="dd-item
        
        
        
        ">
      <a href="/CFWebsite/advanced_concepts/">
          Advanced Concepts
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/advanced_concepts/input/" title="Handling Input" class="dd-item ">
        <a href="/CFWebsite/advanced_concepts/input/">
        Handling Input
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/advanced_concepts/multi_viewport/" title="Multi Viewport" class="dd-item ">
        <a href="/CFWebsite/advanced_concepts/multi_viewport/">
        Multi Viewport
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/advanced_concepts/material_system/" title="PBS Material System" class="dd-item ">
        <a href="/CFWebsite/advanced_concepts/material_system/">
        PBS Material System
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/advanced_concepts/shader/" title="Shader System" class="dd-item ">
        <a href="/CFWebsite/advanced_concepts/shader/">
        Shader System
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/advanced_concepts/callback_system/" title="Callback System" class="dd-item ">
        <a href="/CFWebsite/advanced_concepts/callback_system/">
        Callback System
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/advanced_concepts/sockets/" title="Sockets" class="dd-item ">
        <a href="/CFWebsite/advanced_concepts/sockets/">
        Sockets
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/advanced_concepts/platform_independency/" title="Keeping Platform Independency " class="dd-item ">
        <a href="/CFWebsite/advanced_concepts/platform_independency/">
        Keeping Platform Independency 
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/CFWebsite/graphics_lectures/" title="Graphical Lectures" class="dd-item
        
        
        
        ">
      <a href="/CFWebsite/graphics_lectures/">
          Graphical Lectures
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/CFWebsite/graphics_lectures/moving_objects/" title="Moving Objects" class="dd-item
        
        
        
        ">
      <a href="/CFWebsite/graphics_lectures/moving_objects/">
          Moving Objects
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/CFWebsite/graphics_lectures/moving_objects/transformation/" title="Transformations" class="dd-item
        
        
        
        ">
      <a href="/CFWebsite/graphics_lectures/moving_objects/transformation/">
          Transformations
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/graphics_lectures/moving_objects/transformation/example/" title="Solarsystem 1" class="dd-item ">
        <a href="/CFWebsite/graphics_lectures/moving_objects/transformation/example/">
        Solarsystem 1
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/CFWebsite/graphics_lectures/moving_objects/scenegraph/" title="Scenegraph" class="dd-item
        
        
        
        ">
      <a href="/CFWebsite/graphics_lectures/moving_objects/scenegraph/">
          Scenegraph
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/graphics_lectures/moving_objects/scenegraph/example/" title="Solarsystem 2" class="dd-item ">
        <a href="/CFWebsite/graphics_lectures/moving_objects/scenegraph/example/">
        Solarsystem 2
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/graphics_lectures/moving_objects/virtual_camera/" title="Virtual Camera" class="dd-item ">
        <a href="/CFWebsite/graphics_lectures/moving_objects/virtual_camera/">
        Virtual Camera
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/graphics_lectures/moving_objects/frustum_culling/" title="View Frustum Culling" class="dd-item ">
        <a href="/CFWebsite/graphics_lectures/moving_objects/frustum_culling/">
        View Frustum Culling
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/CFWebsite/graphics_lectures/lighting/" title="Lighting" class="dd-item
        
        
        
        ">
      <a href="/CFWebsite/graphics_lectures/lighting/">
          Lighting
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/graphics_lectures/lighting/pbr/" title="Physically Based Shading" class="dd-item ">
        <a href="/CFWebsite/graphics_lectures/lighting/pbr/">
        Physically Based Shading
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/graphics_lectures/lighting/light_sources/" title="Light Sources" class="dd-item ">
        <a href="/CFWebsite/graphics_lectures/lighting/light_sources/">
        Light Sources
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/graphics_lectures/lighting/shadows/" title="Casting Shadows" class="dd-item ">
        <a href="/CFWebsite/graphics_lectures/lighting/shadows/">
        Casting Shadows
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/CFWebsite/graphics_lectures/animations/" title="All about Animations" class="dd-item
        
        
        
        ">
      <a href="/CFWebsite/graphics_lectures/animations/">
          All about Animations
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/graphics_lectures/animations/morphing/" title="Morphing" class="dd-item ">
        <a href="/CFWebsite/graphics_lectures/animations/morphing/">
        Morphing
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/graphics_lectures/animations/skeletal_animation/" title="Skeletal Animation" class="dd-item ">
        <a href="/CFWebsite/graphics_lectures/animations/skeletal_animation/">
        Skeletal Animation
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/CFWebsite/graphics_lectures/fun_with_textures/" title="Fun with Textures" class="dd-item
        
        
        
        ">
      <a href="/CFWebsite/graphics_lectures/fun_with_textures/">
          Fun with Textures
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/graphics_lectures/fun_with_textures/skybox/" title="Skybox" class="dd-item ">
        <a href="/CFWebsite/graphics_lectures/fun_with_textures/skybox/">
        Skybox
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/graphics_lectures/fun_with_textures/normal_displacement_mapping/" title="Normal and Displacement Mapping" class="dd-item ">
        <a href="/CFWebsite/graphics_lectures/fun_with_textures/normal_displacement_mapping/">
        Normal and Displacement Mapping
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/CFWebsite/graphics_lectures/graphical_user_interface/" title="Graphical User Interface - GUI" class="dd-item
        
        
        
        ">
      <a href="/CFWebsite/graphics_lectures/graphical_user_interface/">
          Graphical User Interface - GUI
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/graphics_lectures/graphical_user_interface/dear_imgui/" title="Dear ImGUI" class="dd-item ">
        <a href="/CFWebsite/graphics_lectures/graphical_user_interface/dear_imgui/">
        Dear ImGUI
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/graphics_lectures/graphical_user_interface/text_rendering/" title="Text Rendering" class="dd-item ">
        <a href="/CFWebsite/graphics_lectures/graphical_user_interface/text_rendering/">
        Text Rendering
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/CFWebsite/showcase/" title="Showcase" class="dd-item
        parent
        
        
        ">
      <a href="/CFWebsite/showcase/">
          Showcase
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/showcase/checkpoin_race/" title="Checkpoint Race" class="dd-item active">
        <a href="/CFWebsite/showcase/checkpoin_race/">
        Checkpoint Race
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/showcase/flappy_bird_reimagined/" title="Flappy Bird Reimagined" class="dd-item ">
        <a href="/CFWebsite/showcase/flappy_bird_reimagined/">
        Flappy Bird Reimagined
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/showcase/mapbuilder/" title="Map-Builder Prototype" class="dd-item ">
        <a href="/CFWebsite/showcase/mapbuilder/">
        Map-Builder Prototype
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/showcase/licenses_showcases/" title="Licenses" class="dd-item ">
        <a href="/CFWebsite/showcase/licenses_showcases/">
        Licenses
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/CFWebsite/how_to_contribute/" title="How to contribute" class="dd-item
        
        
        
        ">
      <a href="/CFWebsite/how_to_contribute/">
          How to contribute
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/how_to_contribute/markdown_guide/" title="Markdown Guide" class="dd-item ">
        <a href="/CFWebsite/how_to_contribute/markdown_guide/">
        Markdown Guide
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/how_to_contribute/shortcodes/" title="Shortcodes" class="dd-item ">
        <a href="/CFWebsite/how_to_contribute/shortcodes/">
        Shortcodes
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/CFWebsite/how_to_contribute/about_this_site/" title="About This Site" class="dd-item ">
        <a href="/CFWebsite/how_to_contribute/about_this_site/">
        About This Site
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://github.com/CrossForge/CrossForge"><i class='fab fa-github'></i> Github repo</a>
              </li>
          
              <li>
                  <a class="padding" href="https://www.tu-chemnitz.de/informatik/GDV/"><i class='fas fa-bookmark'></i> TU Chemnitz</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/CFWebsite/'>Introduction</a> > <a href='/CFWebsite/showcase/'>Showcase</a> > Checkpoint Race
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#the-idea">The Idea</a>
      <ul>
        <li><a href="#creating-a-composite-world">Creating a composite world</a></li>
        <li><a href="#setting-up-the-camera">Setting up the camera</a></li>
        <li><a href="#animating-the-bird">Animating the Bird</a></li>
        <li><a href="#collision-detection">Collision detection</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Checkpoint Race
            </h1>
          

        



<h2 id="the-idea">The Idea</h2>
<p>Imagine you were a bird soaring through the world, effortlessly flapping your wings or diving with remarkable speed.
We wanted to create a small game from this idea. But before we could work on the realisation of the game, we had to think about a few things.</p>
<p>We needed a goal for the small game itself. We wanted to show the manoeuvrability of a birds by constructing a parkour. To complete the level, the player must fly through several checkpoints. For added motivation and replay potential, the time taken to reach the end will be recorded and colliding with obstacles will incur a time penalty which will be included in the final time.</p>
<p><img src="/checkpoint_run_showcase.gif" alt="Bird flying through a checkpoint"></p>
<h3 id="creating-a-composite-world">Creating a composite world</h3>
<p>Without any objects, a world for a bird or its flight would be monotonous. That&rsquo;s why we created a small city with the help of a grind in which we placed buildings. We took the objects themselves from an online database for 3D objects, as well as the bird model.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">set_building</span>(<span style="color:#66d9ef">float</span> x, <span style="color:#66d9ef">float</span> y, <span style="color:#66d9ef">float</span> z, <span style="color:#66d9ef">int</span> model, <span style="color:#66d9ef">int</span> i) {
</span></span><span style="display:flex;"><span>	SGNTransformation<span style="color:#f92672">*</span> pTransformSGN <span style="color:#f92672">=</span> <span style="color:#66d9ef">nullptr</span>;
</span></span><span style="display:flex;"><span>	SGNGeometry<span style="color:#f92672">*</span> pGeomSGN <span style="color:#f92672">=</span> <span style="color:#66d9ef">nullptr</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	pTransformSGN <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> SGNTransformation();
</span></span><span style="display:flex;"><span>	pTransformSGN<span style="color:#f92672">-&gt;</span>init(<span style="color:#f92672">&amp;</span>m_BuildingGroupSGN);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// set to other vector
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	pTransformSGN<span style="color:#f92672">-&gt;</span>translation(Vector3f(x, z, y));
</span></span><span style="display:flex;"><span>	pTransformSGN<span style="color:#f92672">-&gt;</span>scale(m_building_scale);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	pGeomSGN <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> SGNGeometry();
</span></span><span style="display:flex;"><span>	pGeomSGN<span style="color:#f92672">-&gt;</span>init(pTransformSGN, <span style="color:#f92672">&amp;</span>m_Buildings[model]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	m_BuildingTransformationSGNs.push_back(pTransformSGN);
</span></span><span style="display:flex;"><span>	m_BuildingSGNs.push_back(pGeomSGN);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>As you see we just created a function to place an object out of a list of objects. We can change the object type with the <code>int model</code>. In total we had 3 buildings but it would be no problem to implement further models.</p>
<h3 id="setting-up-the-camera">Setting up the camera</h3>
<p>In the normal CrossForge framework the camera can move freely. In our application we thought about a 3rd person view - so that we would follow the bird at all times and see his flight. So we did not want to positon the camera right into the bird but a bit higher up and back. The bird itself would be in the center of the frame at all the time.</p>
<p>Down below you can see the code for a simple camera that follows the bird at all times.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">defaultCameraUpdateBird</span>(VirtualCamera<span style="color:#f92672">*</span> pCamera, Keyboard<span style="color:#f92672">*</span> pKeyboard, Mouse<span style="color:#f92672">*</span> pMouse, Vector3f m, Vector3f posBird, Vector3f up, Matrix3f bird) {
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// the update vector
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    Vector3f mm;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// position for the camer
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Vector3f posC <span style="color:#f92672">=</span> Vector3f(<span style="color:#ae81ff">0.0f</span>, <span style="color:#ae81ff">3.0f</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">10.0f</span>); 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// bird is a matrix and in eigen you access a matrix via (row, col)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	mm.x() <span style="color:#f92672">=</span> bird(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>) <span style="color:#f92672">*</span> posC.x() <span style="color:#f92672">+</span> bird(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">2</span>) <span style="color:#f92672">*</span> posC.z();
</span></span><span style="display:flex;"><span>	mm.y() <span style="color:#f92672">=</span> posC.y();
</span></span><span style="display:flex;"><span>	mm.z() <span style="color:#f92672">=</span> bird(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">0</span>) <span style="color:#f92672">*</span> posC.x() <span style="color:#f92672">+</span> bird(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">2</span>) <span style="color:#f92672">*</span> posC.z();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// update the camera
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	pCamera<span style="color:#f92672">-&gt;</span>position(posBird <span style="color:#f92672">+</span> mm);
</span></span><span style="display:flex;"><span>	pCamera<span style="color:#f92672">-&gt;</span>lookAt(pCamera<span style="color:#f92672">-&gt;</span>position(), posBird, up);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="animating-the-bird">Animating the Bird</h3>
<p>As we already had several bird models we wanted also to animiate them. The rigging of the bird was done using blender.
We did not want to play the animation the whole time so we thought to only acivate it while pressing the space key.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">float</span> AnimationSpeed <span style="color:#f92672">=</span> <span style="color:#ae81ff">1000</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">10.0f</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (m_RenderWin.keyboard()<span style="color:#f92672">-&gt;</span>keyPressed(Keyboard<span style="color:#f92672">::</span>KEY_SPACE, true)) {
</span></span><span style="display:flex;"><span>	SkeletalAnimationController<span style="color:#f92672">::</span>Animation<span style="color:#f92672">*</span> pAnim <span style="color:#f92672">=</span> m_BipedController.createAnimation(<span style="color:#ae81ff">0</span>, AnimationSpeed, <span style="color:#ae81ff">0.0f</span>);
</span></span><span style="display:flex;"><span>	m_Bird.activeAnimation(pAnim);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>You need load the mesh and the according animation beforehand.</p>
<h3 id="collision-detection">Collision detection</h3>
<p>In order to recognize a mistake (i.e. flying into a building) or checking if the bird is in a checkpoint we need to use collision detection.
Creating a collision detection for ourselfs was not feasible. So we took an existing library. This library is called fcl (<a href="https://github.com/flexible-collision-library/fcl">Flexible-collision-library</a>).</p>
<p>As you see our scene is not very complex as well as our models, so it is best to use approximations for the collision and not the meshes itself. This safes computing power and in the future we could implement the meshes at any time.
For the bird we used a sphere as collision shape and for the building a simple box.</p>
<p>Before we implement anything we need to include fcl itself. After that we set fcl up.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;fcl/narrowphase/collision_object.h&#34;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;fcl/narrowphase/distance.h&#34;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// setup for collision detections
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">auto</span> solver_type <span style="color:#f92672">=</span> fcl<span style="color:#f92672">::</span>GJKSolverType<span style="color:#f92672">::</span>GST_LIBCCD;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> fcl<span style="color:#f92672">::</span>Vector3;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">using</span> Real <span style="color:#f92672">=</span> <span style="color:#66d9ef">typename</span> fcl<span style="color:#f92672">::</span>constants<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">float</span><span style="color:#f92672">&gt;::</span>Real;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> Real eps <span style="color:#f92672">=</span> fcl<span style="color:#f92672">::</span>constants<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">float</span><span style="color:#f92672">&gt;::</span>eps();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>fcl<span style="color:#f92672">::</span>CollisionRequest<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">float</span><span style="color:#f92672">&gt;</span> collision_request(<span style="color:#ae81ff">1</span> <span style="color:#75715e">/* num contacts */</span>,
</span></span><span style="display:flex;"><span>				true <span style="color:#75715e">/* enable_contact */</span>);
</span></span><span style="display:flex;"><span>collision_request.gjk_solver_type <span style="color:#f92672">=</span> solver_type;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// the lambda function itself to handle collisons
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">auto</span> evaluate_collision <span style="color:#f92672">=</span> [<span style="color:#f92672">&amp;</span>](
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">const</span> fcl<span style="color:#f92672">::</span>CollisionObject<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">float</span><span style="color:#f92672">&gt;*</span> s1, <span style="color:#66d9ef">const</span> fcl<span style="color:#f92672">::</span>CollisionObject<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">float</span><span style="color:#f92672">&gt;*</span> s2, <span style="color:#66d9ef">bool</span><span style="color:#f92672">*</span> col) {
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// Compute collision.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	fcl<span style="color:#f92672">::</span>CollisionResult<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">float</span><span style="color:#f92672">&gt;</span> collision_result;
</span></span><span style="display:flex;"><span>	std<span style="color:#f92672">::</span>size_t contact_count <span style="color:#f92672">=</span> fcl<span style="color:#f92672">::</span>collide(s1, s2, collision_request, collision_result);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// Test answers
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> (contact_count <span style="color:#f92672">&gt;=</span> collision_request.num_max_contacts) {
</span></span><span style="display:flex;"><span>		std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>fcl<span style="color:#f92672">::</span>Contact<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">float</span><span style="color:#f92672">&gt;&gt;</span> contacts;
</span></span><span style="display:flex;"><span>		collision_result.getContacts(contacts);
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">//GTEST_ASSERT_EQ(contacts.size(), collision_request.num_max_contacts);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#f92672">*</span>col <span style="color:#f92672">=</span> true; <span style="color:#75715e">// if the color is true then we know there is a collision
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Then we gather all information we need for the bird</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>Eigen<span style="color:#f92672">::</span>Vector3f BirdPos;
</span></span><span style="display:flex;"><span>Eigen<span style="color:#f92672">::</span>Quaternionf BirdRot;
</span></span><span style="display:flex;"><span>Eigen<span style="color:#f92672">::</span>Vector3f BirdScale;
</span></span><span style="display:flex;"><span>m_BirdTransformSGN.buildTansformation(<span style="color:#f92672">&amp;</span>BirdPos, <span style="color:#f92672">&amp;</span>BirdRot, <span style="color:#f92672">&amp;</span>BirdScal);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// need biggest dimesion for the bounding sphere 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">auto</span> birdSphere <span style="color:#f92672">=</span> m_BirdSGN.actor()<span style="color:#f92672">-&gt;</span>boundingVolume().boundingSphere();
</span></span><span style="display:flex;"><span>m_max_scale_bird <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>max(std<span style="color:#f92672">::</span>max(BirdScale.x(), BirdScale.y()), BirdScale.z());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// set the radius of the bird
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">auto</span> bird_collision <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>make_shared<span style="color:#f92672">&lt;</span>fcl<span style="color:#f92672">::</span>Sphere<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">float</span><span style="color:#f92672">&gt;&gt;</span>(birdSphere.radius() <span style="color:#f92672">*</span> m_max_scale_bird);
</span></span><span style="display:flex;"><span>fcl<span style="color:#f92672">::</span>Transform3<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">float</span><span style="color:#f92672">&gt;</span> X_WS <span style="color:#f92672">=</span> fcl<span style="color:#f92672">::</span>Transform3<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">float</span><span style="color:#f92672">&gt;::</span>Identity();
</span></span><span style="display:flex;"><span>fcl<span style="color:#f92672">::</span>CollisionObject<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">float</span><span style="color:#f92672">&gt;</span> bird_collision_geometry(bird_collision, X_WS);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// also need to set the rotation of the bird
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>fcl<span style="color:#f92672">::</span>Transform3f bMat <span style="color:#f92672">=</span> fcl<span style="color:#f92672">::</span>Transform3f<span style="color:#f92672">::</span>Identity();
</span></span><span style="display:flex;"><span>bMat.translate(BirdPos); 
</span></span><span style="display:flex;"><span>bMat.rotate(BirdRot); 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>m_birdTestCollision <span style="color:#f92672">=</span> bMat.matrix();
</span></span><span style="display:flex;"><span>bird_collision_geometry.setTransform(bMat);
</span></span></code></pre></div><p>The same we do for the buildings. Here we need to set the bounding box according to the differerent models. Oftentimes the model itself is not in the origin of the objectspace so we need to transform it beforhand.
If you want to read more, you can do that here: <a href="https://github.com/flexible-collision-library/fcl/blob/master/test/test_fcl_sphere_box.cpp">https://github.com/flexible-collision-library/fcl/blob/master/test/test_fcl_sphere_box.cpp</a></p>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/CFWebsite/js/clipboard.min.js?1702068498"></script>
    <script src="/CFWebsite/js/perfect-scrollbar.min.js?1702068498"></script>
    <script src="/CFWebsite/js/perfect-scrollbar.jquery.min.js?1702068498"></script>
    <script src="/CFWebsite/js/jquery.sticky.js?1702068498"></script>
    <script src="/CFWebsite/js/featherlight.min.js?1702068498"></script>
    <script src="/CFWebsite/js/highlight.pack.js?1702068498"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/CFWebsite/js/modernizr.custom-3.6.0.js?1702068498"></script>
    <script src="/CFWebsite/js/learn.js?1702068498"></script>
    <script src="/CFWebsite/js/hugo-learn.js?1702068498"></script>
    
        
            <script src="/CFWebsite/mermaid/mermaid.js?1702068498"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

